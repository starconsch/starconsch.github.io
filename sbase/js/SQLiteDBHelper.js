sap.ui.define(["sap/ui/base/Object"],t=>{"use strict";return t.extend("ch.starcons.sbase.js.SQLiteDBHelper",{_sConstantSqlitePrefix:"sqlite",_sConstantTableData:"sbase_data",_sConstantKeyAppData:"app",_oAppController:null,_oDB:null,_oSQL:null,constructor:function(t){this._oAppController=t;var e=window.initSqlJs;e({locateFile:t=>"https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.12.0/sql-wasm.wasm"}).then(function(t){this._oSQL=t}.bind(this))},createDB:function(t){this._oDB=new this._oSQL.Database(t);var e="PRAGMA foreign_keys = ON;";if(!t){e=`${e} CREATE TABLE ${this._sConstantTableData} (key TEXT UNIQUE,`+"value TEXT);";e=`${e} INSERT INTO ${this._sConstantTableData} (key, value) VALUES ('${this._sConstantKeyAppData}','');`}this._run(e)},executeSQL:function(t){return this._exec(t,true)},exportDB:function(){var t=this._oDB.export();this._oDB.close();this.createDB(t);return t},generateSQLFromTables:function(t){var e="";for(var a=0;a<t.length;a++){if(a>0){e=`${e}\n\n`}for(var n=0;n<t[a].rows.length;n++){if(n==0){e=`${e}DELETE FROM ${t[a].table};\n`}else{e=`${e}\n`}e=`${e}INSERT INTO ${t[a].table} (${Object.keys(t[a].rows[n]).toString()}) VALUES('${Object.values(t[a].rows[n]).join("','")}');`}}return e},readAppData:function(){var t=`SELECT value FROM ${this._sConstantTableData} WHERE key = '${this._sConstantKeyAppData}';`;var e=this._exec(t);if(e.length>0){return e[0].value}else{return null}},updateAppData:function(t){var e=`UPDATE ${this._sConstantTableData} SET value = '${t}' WHERE key = '${this._sConstantKeyAppData}';`;this._run(e)},_exec:function(t,e){var a=[];var n=this._oDB.exec(t);if(n.length===0){return a}for(var s=0;s<n.length;s++){var r=[];var o=n[s];for(var l=0;l<o.values.length;l++){var i=o.values[l];var u={};for(var h=0;h<o.columns.length;h++){var c=o.columns[h];u[c]=i[h];if(u[c]==="null"){u[c]=null}}r.push(u)}a.push(r)}if(e){return a}else{return a[0]}},_run:function(t){this._oDB.run(t)}})});
//# sourceMappingURL=SQLiteDBHelper.js.map